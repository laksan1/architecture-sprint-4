@startuml
actor User

'Запрос списка заказов
User -> MES: Запрос списка заказов
MES -> Cache: Проверка кеша на наличие данных
alt Кеш существует (Cache-Aside)
    Cache -> MES: Возврат данных из кеша
    note right of Cache: Используется паттерн Cache-Aside
else Кеш пуст (Cache-Aside)
    MES -> DB: Запрос на получение списка заказов
    DB -> MES: Ответ с заказами
    MES -> Cache: Сохранение заказов в кеш
    note right of MES: Сохранение данных с TTL (например, 24 часа)
    Cache -> MES: Возврат данных из кеша
end

'Обновление статуса заказа
User -> MES: Обновление статуса заказа
MES -> Cache: Обновление кеша с новым статусом (Write-Behind)
Cache -> MES: Подтверждение обновления кеша
note right of Cache: Используется паттерн Write-Behind
'Фоновая запись в базу данных
MES -> DB: Обновление статуса в базе данных (фоновая запись)
DB -> MES: Подтверждение записи
note right of DB: Запись обновляется в фоне

@enduml
